



<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <title>pyffi.formats.tri — TRI (.tri)</title>

    
    
    
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    
    

    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto|Roboto+Condensed|Source+Sans+Pro" rel="stylesheet">

    

    <!-- CSS -->
    

    

    <link rel="stylesheet" href="../../_static/octicons/octicons/octicons.css">
    <link rel="stylesheet" href="../../_static/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../_static/hover/css/hover-min.css">
    <link rel="stylesheet" href="../../_static/primer-markdown/dist/user-content.min.css">
    <link rel="stylesheet" href="../../_static/css/syntax.css">

    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />



    
    
    <link rel="author" title="About these documents" href="http://niftools.org/about" />
    
    
    <link rel="index" title="Index" href="../../genindex.html" />
    
    
    <link rel="search" title="Search" href="../../search.html" />
    
    
    
    <link rel="next" title="pyffi.spells — High level file operations" href="../spells/index.html" />
    
    
    <link rel="prev" title="pyffi.formats.tga — Targa (.tga)" href="tga.html" />
    
     
</head>
<body data-spy="scroll" data-target="#toc" data-offset="180">
    
    <header class="site-header">
    <div class="container">
        <nav class="navbar ">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#site-navbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a id="site-header-brand" href="../../" title="PyFFI">
                        <img src="../../_static/logo.png" /> PyFFI
                    </a>
                </div>

                <div id="site-navbar" class="collapse navbar-collapse" role="navigation">
                    <ul class="nav navbar-nav navbar-right">
                        
                        <li><a href="http://niftools.org" class=" site-header-nav-item hvr-underline-from-center" target="" title="Home">
                        Home
                        </a></li>
                        
                        
                        
                        <li><a href="http://niftools.org/blog" class="site-header-nav-item hvr-underline-from-center" target="" title="Blog">
                        Blog
                        </a></li>
                        
                        
                        <li><a href="../../" class=" selected  site-header-nav-item hvr-underline-from-center" target="" title="Documentation">
                        Documentation
                        </a></li>
                        
                        
                        <li><a href="http://forum.niftools.org" class=" site-header-nav-item hvr-underline-from-center" target="" title="Forums">
                        Forums
                        </a></li>
                        
                        
                        <li><a href="http://niftools.org/about" class="site-header-nav-item hvr-underline-from-center" target="" title="About">
                        About
                        </a></li>
                        
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    </header>
    
    <div class="content">
        <section class="jumbotron geopattern" data-pattern-id="pyffi.formats.tri — TRI (.tri)">
            <div class="container">
                <div id="jumbotron-meta-info">
                    <h1>PyFFI Documentation</h1>
                    <span class="meta-info">
                        <span class="mega-octicon octicon-repo"></span>&nbsp;&nbsp;pyffi.formats.tri — TRI (.tri)
                    </span>
                </div>
            </div>
        </section>
        <article class="post container" itemscope itemtype="http://schema.org/BlogPosting">
            <div class="row">
                <div class="col-md-2 toc-bar">
                
                <nav id='toc'>
                    <!--<span class="octicon octicon-list-unordered"></span>-->
                    <h3><a href="../../index.html">Table Of Contents</a></h3>
                    
                    <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">pyffi.formats.tri</span></code> — TRI (.tri)</a><ul>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#regression-tests">Regression tests</a><ul>
<li><a class="reference internal" href="#read-a-tri-file">Read a TRI file</a></li>
<li><a class="reference internal" href="#parse-all-tri-files-in-a-directory-tree">Parse all TRI files in a directory tree</a></li>
<li><a class="reference internal" href="#create-an-tri-file-from-scratch-and-write-to-file">Create an TRI file from scratch and write to file</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                    
                </nav>
                
                
                </div>
                <div class="col-md-10">
                    <div class="document">
                        <div class="documentwrapper">
                            
                            <div class="bodywrapper">
                            
                            <div class="body" role="main">
                            
  <span class="target" id="module-pyffi.formats.tri"></span><div class="section" id="pyffi-formats-tri-tri-tri">
<h1><a class="reference internal" href="#module-pyffi.formats.tri" title="pyffi.formats.tri"><code class="xref py py-mod docutils literal"><span class="pre">pyffi.formats.tri</span></code></a> — TRI (.tri)<a class="headerlink" href="#pyffi-formats-tri-tri-tri" title="Permalink to this headline">¶</a></h1>
<p>A .tri file contains facial expression data, that is, morphs for dynamic
expressions such as smile, frown, and so on.</p>
<div class="section" id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyffi.formats.tri.TriFormat">
<em class="property">class </em><code class="descclassname">pyffi.formats.tri.</code><code class="descname">TriFormat</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">pyffi.object_models.xml.FileFormat</span></code></p>
<p>This class implements the TRI format.</p>
<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.Data">
<code class="descname">Data</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.Data" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#pyffi.formats.tri.TriFormat.Header" title="pyffi.formats.tri.TriFormat.Header"><code class="xref py py-class docutils literal"><span class="pre">Header</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="pyffi.formats.tri.TriFormat.FileSignature">
<em class="property">class </em><code class="descname">FileSignature</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.FileSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">pyffi.object_models.xml.basic.BasicBase</span></code></p>
<p>Basic type which implements the header of a TRI file.</p>
<dl class="method">
<dt id="pyffi.formats.tri.TriFormat.FileSignature.get_hash">
<code class="descname">get_hash</code><span class="sig-paren">(</span><em>data=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.FileSignature.get_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a hash value for this value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">An immutable object that can be used as a hash.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyffi.formats.tri.TriFormat.FileSignature.get_size">
<code class="descname">get_size</code><span class="sig-paren">(</span><em>data=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.FileSignature.get_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return number of bytes the header string occupies in a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Number of bytes.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyffi.formats.tri.TriFormat.FileSignature.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>stream</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.FileSignature.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read header string from stream and check it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stream</strong> (<em>file</em>) – The stream to read from.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyffi.formats.tri.TriFormat.FileSignature.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>stream</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.FileSignature.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the header string to stream.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stream</strong> (<em>file</em>) – The stream to write to.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyffi.formats.tri.TriFormat.Header">
<em class="property">class </em><code class="descname">Header</code><span class="sig-paren">(</span><em>template=None</em>, <em>argument=None</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.Header" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">pyffi.formats.tri._Header</span></code>, <code class="xref py py-class docutils literal"><span class="pre">pyffi.object_models.Data</span></code></p>
<p>A class to contain the actual tri data.</p>
<dl class="method">
<dt id="pyffi.formats.tri.TriFormat.Header.add_modifier">
<code class="descname">add_modifier</code><span class="sig-paren">(</span><em>name=None</em>, <em>relative_vertices=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.Header.add_modifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a modifier.</p>
</dd></dl>

<dl class="method">
<dt id="pyffi.formats.tri.TriFormat.Header.add_morph">
<code class="descname">add_morph</code><span class="sig-paren">(</span><em>name=None</em>, <em>relative_vertices=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.Header.add_morph" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a morph.</p>
</dd></dl>

<dl class="method">
<dt id="pyffi.formats.tri.TriFormat.Header.inspect">
<code class="descname">inspect</code><span class="sig-paren">(</span><em>stream</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.Header.inspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Quickly checks if stream contains TRI data, and reads
everything up to the arrays.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stream</strong> (<em>file</em>) – The stream to inspect.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyffi.formats.tri.TriFormat.Header.inspect_quick">
<code class="descname">inspect_quick</code><span class="sig-paren">(</span><em>stream</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.Header.inspect_quick" title="Permalink to this definition">¶</a></dt>
<dd><p>Quickly checks if stream contains TRI data, by looking at
the first 8 bytes. Reads the signature and the version.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stream</strong> (<em>file</em>) – The stream to inspect.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyffi.formats.tri.TriFormat.Header.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>stream</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.Header.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a tri file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stream</strong> (<code class="docutils literal"><span class="pre">file</span></code>) – The stream from which to read.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyffi.formats.tri.TriFormat.Header.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>stream</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.Header.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a tri file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stream</strong> (<code class="docutils literal"><span class="pre">file</span></code>) – The stream to which to write.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyffi.formats.tri.TriFormat.ModifierRecord">
<em class="property">class </em><code class="descname">ModifierRecord</code><span class="sig-paren">(</span><em>template=None</em>, <em>argument=None</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.ModifierRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">pyffi.object_models.xml.struct_.StructBase</span></code></p>
<p>A modifier replaces the vertices from the base model(Header.vertices) with those in Header.modifier_vertices. Notethat Header.modifier_vertices counts up from the first modifieronwards. For example, if you were to take the 4th vertex to bemodified in the 2nd modifier and the size of the 1st modifierwas 10 vertices, then you would needHeader.modifier_vertices[14].  Therefore,Header.num_modifier_vertices =sum(modifier.num_vertices_to_modify for modifier inHeader.modifiers).</p>
<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.ModifierRecord.modifier_vertices">
<code class="descname">modifier_vertices</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.ModifierRecord.modifier_vertices" title="Permalink to this definition">¶</a></dt>
<dd><p>The actual modifier vertices (copied from Header.modifier_vertices).</p>
</dd></dl>

<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.ModifierRecord.name">
<code class="descname">name</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.ModifierRecord.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the Modifier.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.ModifierRecord.vertices_to_modify">
<code class="descname">vertices_to_modify</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.ModifierRecord.vertices_to_modify" title="Permalink to this definition">¶</a></dt>
<dd><p>List of Vertices To Modify.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyffi.formats.tri.TriFormat.MorphRecord">
<em class="property">class </em><code class="descname">MorphRecord</code><span class="sig-paren">(</span><em>template=None</em>, <em>argument=None</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.MorphRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">pyffi.formats.tri._MorphRecord</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># create morph with 3 vertices.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">morph</span> <span class="o">=</span> <span class="n">TriFormat</span><span class="o">.</span><span class="n">MorphRecord</span><span class="p">(</span><span class="n">argument</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">morph</span><span class="o">.</span><span class="n">set_relative_vertices</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># scale should be 9/32768.0 = 0.0002746...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">morph</span><span class="o">.</span><span class="n">scale</span> 
<span class="go">0.0002746...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">vert</span> <span class="ow">in</span> <span class="n">morph</span><span class="o">.</span><span class="n">get_relative_vertices</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vert</span><span class="p">])</span>
<span class="go">[3000, 5000, 2000]</span>
<span class="go">[1000, 3000, 2000]</span>
<span class="go">[-8999, 3000, -999]</span>
</pre></div>
</div>
<dl class="method">
<dt id="pyffi.formats.tri.TriFormat.MorphRecord.apply_scale">
<code class="descname">apply_scale</code><span class="sig-paren">(</span><em>scale</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.MorphRecord.apply_scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply scale factor to data.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># create morph with 3 vertices.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">morph</span> <span class="o">=</span> <span class="n">TriFormat</span><span class="o">.</span><span class="n">MorphRecord</span><span class="p">(</span><span class="n">argument</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">morph</span><span class="o">.</span><span class="n">set_relative_vertices</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">morph</span><span class="o">.</span><span class="n">apply_scale</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">vert</span> <span class="ow">in</span> <span class="n">morph</span><span class="o">.</span><span class="n">get_relative_vertices</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vert</span><span class="p">])</span>
<span class="go">[6000, 10000, 4000]</span>
<span class="go">[2000, 6000, 4000]</span>
<span class="go">[-17999, 6000, -1999]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyffi.formats.tri.TriFormat.QuadFace">
<em class="property">class </em><code class="descname">QuadFace</code><span class="sig-paren">(</span><em>template=None</em>, <em>argument=None</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.QuadFace" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">pyffi.object_models.xml.struct_.StructBase</span></code></p>
<p>Not used by the Oblivion engine as it’s tri based.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.byte">
<code class="descname">byte</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.byte" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">Byte</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.char">
<code class="descname">char</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.char" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">Char</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.float">
<code class="descname">float</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.float" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">Float</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.int">
<code class="descname">int</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.int" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">Int</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.short">
<code class="descname">short</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.short" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">Short</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.ubyte">
<code class="descname">ubyte</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.ubyte" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">UByte</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.uint">
<code class="descname">uint</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.uint" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">UInt</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="pyffi.formats.tri.TriFormat.ushort">
<code class="descname">ushort</code><a class="headerlink" href="#pyffi.formats.tri.TriFormat.ushort" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">UShort</span></code></p>
</dd></dl>

<dl class="staticmethod">
<dt id="pyffi.formats.tri.TriFormat.version_number">
<em class="property">static </em><code class="descname">version_number</code><span class="sig-paren">(</span><em>version_str</em><span class="sig-paren">)</span><a class="headerlink" href="#pyffi.formats.tri.TriFormat.version_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts version string into an integer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>version_str</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The version string.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A version integer.</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TriFormat</span><span class="o">.</span><span class="n">version_number</span><span class="p">(</span><span class="s1">&#39;003&#39;</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TriFormat</span><span class="o">.</span><span class="n">version_number</span><span class="p">(</span><span class="s1">&#39;XXX&#39;</span><span class="p">)</span>
<span class="go">-1</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="regression-tests">
<h2>Regression tests<a class="headerlink" href="#regression-tests" title="Permalink to this headline">¶</a></h2>
<div class="section" id="read-a-tri-file">
<h3>Read a TRI file<a class="headerlink" href="#read-a-tri-file" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># check and read tri file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os.path</span> <span class="k">import</span> <span class="n">dirname</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dirpath</span> <span class="o">=</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span> <span class="c1">#recurse up to root repo dir</span>
<span class="gp">... </span>    <span class="n">dirpath</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="n">dirpath</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">repo_root</span> <span class="o">=</span> <span class="n">dirpath</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_root</span><span class="p">,</span> <span class="s1">&#39;tests&#39;</span><span class="p">,</span> <span class="s1">&#39;formats&#39;</span><span class="p">,</span> <span class="s1">&#39;tri&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">format_root</span><span class="p">,</span> <span class="s1">&#39;mmouthxivilai.tri&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">TriFormat</span><span class="o">.</span><span class="n">Data</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># do some stuff with header?</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">num_vertices</span>
<span class="go">89</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">num_tri_faces</span>
<span class="go">215</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">num_quad_faces</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">num_uvs</span>
<span class="go">89</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">num_morphs</span>
<span class="go">18</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">morph</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">morph</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">morphs</span><span class="p">])</span>
<span class="go">[&#39;Fear&#39;, &#39;Surprise&#39;, &#39;Aah&#39;, &#39;BigAah&#39;, &#39;BMP&#39;, &#39;ChJSh&#39;, &#39;DST&#39;, &#39;Eee&#39;, &#39;Eh&#39;, &#39;FV&#39;, &#39;I&#39;, &#39;K&#39;, &#39;N&#39;, &#39;Oh&#39;, &#39;OohQ&#39;, &#39;R&#39;, &#39;Th&#39;, &#39;W&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-all-tri-files-in-a-directory-tree">
<h3>Parse all TRI files in a directory tree<a class="headerlink" href="#parse-all-tri-files-in-a-directory-tree" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">stream</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">TriFormat</span><span class="o">.</span><span class="n">walkData</span><span class="p">(</span><span class="n">format_root</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>        <span class="c1"># the replace call makes the doctest also pass on windows</span>
<span class="gp">... </span>        <span class="n">os_path</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">name</span>
<span class="gp">... </span>        <span class="n">split</span> <span class="o">=</span> <span class="p">(</span><span class="n">os_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">))[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
<span class="gp">... </span>        <span class="n">rejoin</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">*</span><span class="n">split</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;reading </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">rejoin</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span>
<span class="gp">... </span>            <span class="s2">&quot;Warning: read failed due corrupt file,&quot;</span>
<span class="gp">... </span>            <span class="s2">&quot; corrupt format description, or bug.&quot;</span><span class="p">)</span> 
<span class="go">reading tests/formats/tri/mmouthxivilai.tri</span>
</pre></div>
</div>
</div>
<div class="section" id="create-an-tri-file-from-scratch-and-write-to-file">
<h3>Create an TRI file from scratch and write to file<a class="headerlink" href="#create-an-tri-file-from-scratch-and-write-to-file" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">TriFormat</span><span class="o">.</span><span class="n">Data</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tempfile</span> <span class="k">import</span> <span class="n">TemporaryFile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="n">TemporaryFile</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


                            </div>
                            
                            </div>
                          
                        </div>
                        <div class="clearer"></div>
                    </div>
                </div>
            </div>
        </article>
    </div>
    
    <footer class="container">
        <div class="site-footer">
            
            <div class="copyright pull-left">
                
                    &#169; Copyright 2012-2017, NifTools.
                
                <!-- 请不要更改这一行 方便其他人知道模板的来源 谢谢 -->
                <!-- Please keep this line to let others know where this theme comes from. Thank you :D -->
                <!--Powered by <a href="https://github.com/DONGChuan/Yummy-Jekyll">Yummy Jekyll</a> -->
            </div>
            

            <div class="pull-middle">
                
                <a href="https://github.com/niftools/pyffi" target="_blank" aria-label="PyFFI on GitHub">
                    <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
                </a>
                
            </div>

            
            <div class="sphinx pull-right">
                Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5
            </div>
            
        </div>
    </footer>
    

    
    

    <!-- JS -->
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.2.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/js/script.js"></script>
    <script type="text/javascript" src="../../_static/geopattern/js/geopattern.min.js"></script>

    <script>
        $(document).ready(function(){
            $('.geopattern').each(function(){
                var pattern = GeoPattern.generate($(this).data('pattern-id'));
                $(this).css('background-image', pattern.toDataUrl());
                //$(this).geopattern($(this).data('pattern-id'));
            });
        });
    </script>


    
</body>
</html>